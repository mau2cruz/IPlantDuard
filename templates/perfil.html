<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de Usuario - IPlantGuard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css') }}">
</head>

<body>
    <div class="contenedor">

        <!-- NAVEGACIÃ“N SUPERIOR -->
        <nav class="navbar">
            <div class="nav-logo">ğŸŒ¿ IPlantGuard</div>
            <div class="nav-menu">
                <a href="/" class="nav-link">Inicio</a>
                <a href="/dashboard" class="nav-link">ğŸ“Š Dashboard</a>
                <a href="/historial" class="nav-link">ğŸ“œ Historial</a>
                <a href="/biblioteca" class="nav-link">ğŸ“š Biblioteca</a>
                <a href="/demo" class="nav-link">ğŸ¯ Demo</a>
                <a href="/chatbot" class="nav-link">ğŸ’¬ Chatbot</a>
                <a href="/perfil" class="nav-link active">âš™ï¸ Perfil</a>
            </div>
        </nav>

        <header>
            <h1 class="titulo">âš™ï¸ Perfil de Usuario</h1>
            <p class="subtitulo">Personaliza tu experiencia en IPlantGuard</p>
        </header>

        <!-- PREFERENCIAS -->
        <div class="tarjeta perfil-container">
            <h2>Preferencias de PersonalizaciÃ³n</h2>

            <div class="preference-group">
                <h3>ğŸŒ Idioma</h3>
                <select id="language-select" class="preference-select">
                    <option value="es" {% if settings.language == 'es' %}selected{% endif %}>EspaÃ±ol</option>
                    <option value="en" {% if settings.language == 'en' %}selected{% endif %}>English</option>
                    <option value="fr" {% if settings.language == 'fr' %}selected{% endif %}>FranÃ§ais</option>
                    <option value="pt" {% if settings.language == 'pt' %}selected{% endif %}>PortuguÃªs</option>
                </select>
            </div>

            <div class="preference-group">
                <h3>ğŸŒˆ Tema Visual</h3>
                <select id="theme-select" class="preference-select">
                    <option value="light" {% if settings.theme == 'light' %}selected{% endif %}>â˜€ï¸ Tema Claro</option>
                    <option value="dark" {% if settings.theme == 'dark' %}selected{% endif %}>ğŸŒ™ Tema Oscuro</option>
                    <option value="auto" {% if settings.theme == 'auto' %}selected{% endif %}>ğŸ”„ AutomÃ¡tico</option>
                </select>
            </div>

            <div class="preference-group checkbox">
                <label>
                    <input type="checkbox" id="notifications-check" {% if settings.notifications %}checked{% endif %}>
                    <span>ğŸ”” Habilitar Notificaciones</span>
                </label>
            </div>

            <div class="preference-group checkbox">
                <label>
                    <input type="checkbox" id="autosave-check" {% if settings.auto_save %}checked{% endif %}>
                    <span>ğŸ’¾ Guardar DiagnÃ³sticos AutomÃ¡ticamente</span>
                </label>
            </div>

            <button class="btn-primario" onclick="guardarPreferencias()">âœ… Guardar Cambios</button>
        </div>

        <!-- INFORMACIÃ“N -->
        <div class="tarjeta">
            <h2>â„¹ï¸ InformaciÃ³n de IPlantGuard</h2>
            <div class="info-list">
                <div class="info-item">
                    <span class="info-label">VersiÃ³n:</span>
                    <span class="info-value">2.0 Premium</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Funcionalidades Activas:</span>
                    <span class="info-value">9 Nuevas</span>
                </div>
                <div class="info-item">
                    <span class="info-label">API de AnÃ¡lisis:</span>
                    <span class="info-value">Plant.ID v3</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Estado:</span>
                    <span class="info-value">âœ… Operativo</span>
                </div>
            </div>
        </div>

        <!-- AYUDA -->
        <div class="tarjeta">
            <h2>â“ Ayuda y Soporte</h2>
            <ul class="lista-recomendaciones">
                <li><strong>DocumentaciÃ³n:</strong> Revisa nuestros tutoriales en el sitio web.</li>
                <li><strong>Chatbot:</strong> Usa nuestro asistente para preguntas frecuentes.</li>
                <li><strong>Biblioteca:</strong> Aprende sobre enfermedades y prevenciÃ³n.</li>
                <li><strong>Comunidad:</strong> Conecta con otros usuarios de IPlantGuard.</li>
            </ul>
        </div>

        <!-- BOTONES -->
        <div class="botones-final">
            <a href="/" class="btn-primario">ğŸ  Volver al Inicio</a>
            <a href="/dashboard" class="btn-secundario">ğŸ“Š Ver Dashboard</a>
        </div>

    </div>

    <script>
        function guardarPreferencias() {
            const preferences = {
                language: document.getElementById('language-select').value,
                theme: document.getElementById('theme-select').value,
                notifications: document.getElementById('notifications-check').checked,
                auto_save: document.getElementById('autosave-check').checked
            };

            fetch('/guardar_preferencias', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(preferences)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('âœ… Preferencias guardadas correctamente');
                    // Aplicar tema si cambiÃ³
                    if (preferences.theme === 'dark') {
                        document.body.classList.add('dark-theme');
                    } else {
                        document.body.classList.remove('dark-theme');
                    }
                } else {
                    alert('âŒ Error al guardar preferencias');
                }
            })
            .catch(error => console.error('Error:', error));
        }

        // Aplicar tema al cargar
        window.addEventListener('DOMContentLoaded', function() {
            if ('{{ settings.theme }}' === 'dark') {
                document.body.classList.add('dark-theme');
            }
        });
    </script>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>
