<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPlantGuard - Panel de Control</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css') }}">
</head>

<body>
    <div class="contenedor">

        <!-- NAVEGACIÃ“N SUPERIOR -->
        <nav class="navbar">
            <div class="nav-logo">ğŸŒ¿ IPlantGuard</div>
            <div class="nav-menu">
                <a href="/" class="nav-link active">Inicio</a>
                <a href="/dashboard" class="nav-link">ğŸ“Š Dashboard</a>
                <a href="/historial" class="nav-link">ğŸ“œ Historial</a>
                <a href="/biblioteca" class="nav-link">ğŸ“š Biblioteca</a>
                <a href="/demo" class="nav-link">ğŸ¯ Demo</a>
                <a href="/chatbot" class="nav-link">ğŸ’¬ Chatbot</a>
                <a href="/perfil" class="nav-link">âš™ï¸ Perfil</a>
            </div>
        </nav>

        <header>
            <h1 class="titulo">ğŸŒ¿ IPlantGuard</h1>
            <p class="subtitulo">Sistema Inteligente de DiagnÃ³stico Vegetal</p>
        </header>

        <div class="tarjeta">
            <h2>Iniciar DiagnÃ³stico</h2>

            <!-- SUBIR IMAGEN -->
            <form action="/analizar_archivo" method="POST" enctype="multipart/form-data" class="bloque">
                <label class="boton-archivo">
                    ğŸ“¸ Tomar Foto / Subir Imagen
                    <input type="file" name="archivo" accept="image/*" required>
                </label>
                <button type="submit" class="btn-primario">Analizar Imagen</button>
            </form>

            <hr class="solo-pc">

            <!-- CÃMARA PC (CLIENT SIDE) -->
            <div class="bloque solo-pc">
                <button type="button" class="btn-secundario" onclick="iniciarWebcam()">ğŸ“¸ Usar CÃ¡mara de PC (Webcam)</button>
            </div>

            <hr class="solo-pc">

            <!-- CÃMARA CELULAR (SOLO PC) -->
            <form action="/foto_ip" method="POST" class="bloque solo-pc">
                <h3>ğŸ“± Conectar CÃ¡mara Externa (IP)</h3>
                <input type="text" name="ip" placeholder="ğŸ”— IP del dispositivo (Ej: 192.168.0.15:8080)" pattern="^[0-9]{1,3}(\.[0-9]{1,3}){3}\:[0-9]+$" required>
                <button class="btn-secundario">Conectar CÃ¡mara IP</button>
            </form>

            <hr>

            <!-- ACCESO RÃPIDO A FUNCIONALIDADES -->
            <div class="acceso-rapido">
                <a href="/demo" class="btn-acceso">ğŸ¯ Probar Demo</a>
                <a href="/biblioteca" class="btn-acceso">ğŸ“š Ver Enfermedades</a>
                <a href="/chatbot" class="btn-acceso">ğŸ’¬ Hacer Pregunta</a>
            </div>
        </div>

    </div>

    <!-- MODAL CÃMARA -->
    <div id="modal-camara">
        <video id="video-webcam" autoplay playsinline></video>
        <canvas id="canvas-webcam"></canvas>
        <div class="controles-camara">
            <button class="btn-camara-accion btn-capturar" onclick="capturarWebcam()">ğŸ”˜ Capturar</button>
            <button class="btn-camara-accion btn-cerrar" onclick="cerrarWebcam()">âŒ Cancelar</button>
        </div>
    </div>

    <!-- Formulario oculto para enviar la foto capturada -->
    <form id="form-webcam" action="/analizar_archivo" method="POST" enctype="multipart/form-data" style="display:none;">
        <input type="file" name="archivo" id="input-webcam-file">
    </form>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>
