<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de EstadÃ­sticas - IPlantGuard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css') }}">
</head>

<body>
    <div class="contenedor">

        <!-- NAVEGACIÃ“N SUPERIOR -->
        <nav class="navbar">
            <div class="nav-logo">ğŸŒ¿ IPlantGuard</div>
            <div class="nav-menu">
                <a href="/" class="nav-link">Inicio</a>
                <a href="/dashboard" class="nav-link active">ğŸ“Š Dashboard</a>
                <a href="/historial" class="nav-link">ğŸ“œ Historial</a>
                <a href="/biblioteca" class="nav-link">ğŸ“š Biblioteca</a>
                <a href="/demo" class="nav-link">ğŸ¯ Demo</a>
                <a href="/chatbot" class="nav-link">ğŸ’¬ Chatbot</a>
                <a href="/perfil" class="nav-link">âš™ï¸ Perfil</a>
            </div>
        </nav>

        <header>
            <h1 class="titulo">ğŸ“Š Dashboard de EstadÃ­sticas</h1>
            <p class="subtitulo">Resumen de tu actividad en IPlantGuard</p>
        </header>

        <!-- TARJETAS DE ESTADÃSTICAS -->
        <div class="stats-grid">
            <div class="stat-card stat-total">
                <div class="stat-icon">ğŸ“ˆ</div>
                <div class="stat-content">
                    <h3>Total de DiagnÃ³sticos</h3>
                    <p class="stat-number">{{ stats.total }}</p>
                </div>
            </div>

            <div class="stat-card stat-healthy">
                <div class="stat-icon">âœ…</div>
                <div class="stat-content">
                    <h3>Plantas Saludables</h3>
                    <p class="stat-number">{{ stats.healthy }}</p>
                </div>
            </div>

            <div class="stat-card stat-infected">
                <div class="stat-icon">âš ï¸</div>
                <div class="stat-content">
                    <h3>Plantas Infectadas</h3>
                    <p class="stat-number">{{ stats.infected }}</p>
                </div>
            </div>
        </div>

        <!-- PLANTAS MÃS ANALIZADAS -->
        <div class="tarjeta">
            <h2>Plantas MÃ¡s Analizadas</h2>
            {% if stats.plant_types %}
            <ul class="lista-dashboard">
                {% for plant, count in stats.plant_types %}
                <li class="item-dashboard">
                    <span>ğŸŒ± {{ plant }}</span>
                    <span class="badge-count">{{ count }} anÃ¡lisis</span>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <p>AÃºn no hay datos. Â¡Realiza tu primer diagnÃ³stico!</p>
            {% endif %}
        </div>

        <!-- DIAGNÃ“STICOS RECIENTES -->
        <div class="tarjeta">
            <h2>Ãšltimos 5 DiagnÃ³sticos</h2>
            {% if stats.recent %}
            <div class="recent-diagnostics">
                {% for diag in stats.recent %}
                <div class="diagnostic-item">
                    <div class="diag-header">
                        <span class="diag-date">ğŸ“… {{ diag.timestamp[:10] }}</span>
                        <span class="{% if diag.is_healthy %}badge-saludable{% else %}badge-infectado{% endif %}">
                            {% if diag.is_healthy %}âœ… Saludable{% else %}âš ï¸ Infectada{% endif %}
                        </span>
                    </div>
                    <p class="diag-image">Imagen: <strong>{{ diag.image }}</strong></p>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p>No hay diagnÃ³sticos aÃºn. Â¡Comienza ahora!</p>
            {% endif %}
        </div>

        <!-- BOTONES -->
        <div class="botones-final">
            <a href="/" class="btn-primario">ğŸ”„ Nuevo AnÃ¡lisis</a>
            <a href="/historial" class="btn-secundario">ğŸ“œ Ver Historial Completo</a>
        </div>

    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>
